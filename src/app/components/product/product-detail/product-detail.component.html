<header-main
  [isShowBar]="isShowBar"
  [isChanged]="isChanged"
  (reloadData)="saveOnHeader($event)">
</header-main>
<main id="AppFrameMain" class="ui-app-frame__main ">
  <div class="wrapper"
       id="wrapper">
    <div id="body" class="clearfix">
      <div class="" id="content">
        <div id="products-new" class="page">
          <form id="create_new_product" class="new_product" [formGroup]="dataForm" (ngSubmit)="submitForm()">
            <input formControlName="id" [(ngModel)]="product.id" type="hidden">

            <header class="ui-title-bar-container ">
              <div class="ui-title-bar">
                <div class="ui-title-bar__navigation">
                  <div class="ui-breadcrumbs"><a href="javascript:" routerLink="/products"
                                                 class="ui-button ui-button--transparent ui-breadcrumb">
                    <svg class="next-icon next-icon--size-20 next-icon--no-nudge">
                      <use xlink:href="#chevron-left-thinner"></use>
                    </svg>
                    <span class="ui-breadcrumb__item">Products</span></a></div>
                </div>
                <div class="ui-title-bar__main-group">
                  <div class="ui-title-bar__heading-group">
                    <span class="ui-title-bar__icon"><svg
                      class="next-icon next-icon--color-slate-lighter next-icon--size-20"> <use
                      xlink:href="#next-products"></use> </svg></span>
                    <h1 class="ui-title-bar__title">{{product.id != -1 ? product.title : "Add product"}}</h1>
                  </div>
                  <div *ngIf="product.id != -1" class="action-bar">
                    <div class="action-bar__item action-bar__item--link-container">
                      <div class="action-bar__top-links">
                        <button class="ui-button ui-button--transparent action-bar__link" type="button" name="button">
                          <svg class="next-icon next-icon--size-20 action-bar__link-icon next-icon--no-nudge">
                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#next-duplicate-minor"></use>
                          </svg>
                          Duplicate
                        </button>

                        <button class="ui-button ui-button--transparent action-bar__link" type="button" name="button">
                          <svg class="next-icon next-icon--size-20 action-bar__link-icon next-icon--no-nudge">
                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#next-view-minor"></use>
                          </svg>
                          View
                        </button>

                        <span data-popover-index="3" class="action-bar__link action-bar__link--popover">
                      <div class="ui-popover__container">
                        <button class="ui-button ui-button--transparent" type="button" name="button">
                          <svg class="next-icon next-icon--size-20 action-bar__link-icon next-icon--no-nudge"> <use
                            xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#next-promote-minor"></use> </svg>
                          <span>Promote</span>
                          <svg class="next-icon next-icon--size-20"> <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                                          xlink:href="#next-disclosure"></use> </svg>
                        </button>
                        <div class="ui-popover ui-popover--align-edge">
                          <div class="ui-popover__tooltip"></div>
                          <div class="ui-popover__content-wrapper">
                            <div class="ui-popover__content">
                              <div class="ui-popover__pane">
                                <div class="action-bar__popover-wrapper">
                                  <div class="ui-popover__section ui-popover__section--no-padding">
                                    <ul class="ui-action-list">
                                      <li class="ui-action-list__item">
                                        <a
                                          href="https://fb-social-marketing.shopifyapps.com/posts?resource_type=Product"
                                          class="ui-action-list-action" target="_blank" rel="noopener noreferrer">
                                          <span class="ui-action-list-action__text">
                                            <span class="action-bar__popover-icon-wrapper">
                                              <img role="presentation"
                                                   class="action-bar__popover-icon action-bar__popover-icon--image"
                                                   src="https://cdn.shopify.com/s/files/applications/cd24553e4c3460ece3b16baa4d4af25a_512x512.png?1470684504"
                                                   alt="Cd24553e4c3460ece3b16baa4d4af25a 512x512" width="20"
                                                   height="20">
                                            </span>Share on Facebook</span>
                                        </a>
                                      </li>
                                    </ul>
                                  </div>
                                  <div class="ui-popover__section">
                                    <div class="ui-type-container ui-type-container--spacing-tight">
                                      <p>Drive traffic, engage customers, and share products more easily by adding some marketing apps.</p>
                                      <p><a href="https://apps.shopify.com/collections/apps-for-your-promote-tab"
                                            target="_blank" rel="noopener noreferrer">Visit Shopify App Store</a>
                                      </p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </span>
                      </div>
                      <div class="action-bar__more">
                        <div class="ui-popover__container ui-popover__container--contains-active-popover">
                          <button class="ui-button ui-button--transparent" type="button" name="button"
                                  id="ui-popover-activator--9" aria-expanded="true" aria-haspopup="true"
                                  aria-owns="ui-popover--9" aria-controls="ui-popover--9"><span
                            data-singular-label="Actions" data-multiple-label="More actions"
                            class="action-bar__more-label">More actions</span>
                            <svg class="next-icon next-icon--size-20">
                              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#next-disclosure"></use>
                            </svg>
                          </button>
                          <div
                            class="ui-popover ui-popover--align-edge ui-popover--is-positioned-beneath "
                            id="ui-popover--9" aria-labelledby="ui-popover-activator--9" aria-expanded="true"
                            role="dialog"
                            style="max-width: none; margin-right: 0px; margin-left: 0px; transform-origin: 60px -5px 0px; left: 0px;">
                            <div class="ui-popover__tooltip" style="left: 60px;">

                            </div>
                            <div class="ui-popover__content-wrapper">
                              <div class="ui-popover__content" style="max-height: 300px; width: 241px;">
                                <div class="ui-popover__pane">
                                  <ul class="action-bar__popover-wrapper">
                                    <li>
                                      <ul class="ui-action-list">
                                        <li class="ui-action-list__item">
                                          <button class="ui-action-list-action action-bar__popover-hidden-item"
                                                  type="button" name="button">
                                          <span class="ui-action-list-action__text">
                                            <span class="action-bar__popover-icon-wrapper">
                                              <svg
                                                class="next-icon next-icon--color-blue next-icon--size-16 action-bar__popover-icon"> <use
                                                xmlns:xlink="http://www.w3.org/1999/xlink"
                                                xlink:href="#next-duplicate-minor"></use> </svg>
                                            </span>Duplicate
                                          </span>
                                          </button>
                                        </li>
                                        <li class="ui-action-list__item">
                                          <button class="ui-action-list-action action-bar__popover-hidden-item"
                                                  data-popover-index="2" type="button" name="button">
                                          <span class="ui-action-list-action__text">
                                            <span class="action-bar__popover-icon-wrapper">
                                              <svg
                                                class="next-icon next-icon--color-blue next-icon--size-16 action-bar__popover-icon"> <use
                                                xmlns:xlink="http://www.w3.org/1999/xlink"
                                                xlink:href="#next-view-minor"></use> </svg>
                                            </span>View</span>
                                          </button>
                                        </li>
                                      </ul>
                                    </li>
                                    <li data-popover-index="3" class="action-bar__popover-hidden-item">
                                      <div class="ui-popover__section ui-popover__section--no-padding">
                                        <h3 class="ui-subheading action-bar__popover-label">Promote</h3>
                                      </div>
                                      <ul class="ui-action-list">
                                        <li class="ui-action-list__item">
                                          <a
                                            href="https://fb-social-marketing.shopifyapps.com/posts?resource_type=Product"
                                            class="ui-action-list-action" target="_blank" rel="noopener noreferrer">
                                          <span class="ui-action-list-action__text">
                                            <span class="action-bar__popover-icon-wrapper">
                                              <img role="presentation"
                                                   class="action-bar__popover-icon action-bar__popover-icon--image"
                                                   src="https://cdn.shopify.com/s/files/applications/cd24553e4c3460ece3b16baa4d4af25a_512x512.png?1470684504"
                                                   alt="Cd24553e4c3460ece3b16baa4d4af25a 512x512" width="20"
                                                   height="20">
                                            </span>Share on Facebook</span>
                                          </a>
                                        </li>
                                      </ul>
                                    </li>
                                    <li data-popover-index="0">
                                      <div class="ui-popover__section ui-popover__section--no-padding">
                                        <h3 class="ui-subheading action-bar__popover-label">Other actions</h3>
                                      </div>
                                      <ul class="ui-action-list">
                                        <li class="ui-action-list__item">
                                          <a
                                            href="javascript:"
                                            class="ui-action-list-action">
                                          <span class="ui-action-list-action__text">
                                            <span class="action-bar__popover-icon-wrapper">
                                              <img role="presentation"
                                                   class="action-bar__popover-icon action-bar__popover-icon--image"
                                                   src="https://cdn.shopify.com/s/files/applications/60fca9c7f3400ddd43004e94b1355691_512x512.png?1390232038"
                                                   alt="60fca9c7f3400ddd43004e94b1355691 512x512" width="20"
                                                   height="20">
                                            </span>View reviews for this product</span>
                                          </a>
                                        </li>
                                        <li class="ui-action-list__item">
                                          <a
                                            href="javascript:"
                                            class="ui-action-list-action" target="_blank" rel="noopener noreferrer">
                                          <span class="ui-action-list-action__text">
                                            <span class="action-bar__popover-icon-wrapper">
                                              <img role="presentation"
                                                   class="action-bar__popover-icon action-bar__popover-icon--image"
                                                   src="https://cdn.shopify.com/s/files/applications/ff9e6c9c5a4f9b26f52ec48bf1737912_512x512.png?1354515777"
                                                   alt="Ff9e6c9c5a4f9b26f52ec48bf1737912 512x512" width="20"
                                                   height="20">
                                            </span>Edit Metafields</span>
                                          </a>
                                        </li>
                                      </ul>
                                    </li>
                                  </ul>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="ui-title-bar__mobile-primary-actions">
                      <div class="ui-title-bar__actions">
                        <button
                          class="ui-button ui-button--primary js-btn-loadable js-btn-primary ui-title-bar__action btn-primary has-loading"
                          type="submit"
                          name="button" disabled="disabled">Save
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="collapsible-header">
                <div class="collapsible-header__heading"></div>
              </div>
            </header>
            <div class="ui-layout">
              <div class="ui-layout__sections">
                <app-alert style="width: 100%;"></app-alert>
                <div class="ui-layout__section ui-layout__section--primary">
                  <div class="ui-layout__item">
                    <section class="ui-card" id="product-form-container">
                      <div class="ui-card__section">
                        <div class="ui-type-container">
                          <div class="next-input-wrapper"><label class="next-label">Title</label>
                            <input formControlName="title" [(ngModel)]="product.title"
                                   (input)="changeTitle($event.target.value)"
                                   placeholder="Short Sleeve T-Shirt" class="next-input" size="30"
                                   type="text"></div>

                          <div class="next-input-wrapper">
                            <label class="next-label">Description</label>
                            <div>
                              <textarea [froalaEditor] formControlName="body_html"
                                        [(froalaModel)]="product.body_html"></textarea>
                            </div>
                          </div>
                        </div>
                      </div>
                    </section>
                    <section class="ui-card" id="product-images-container">

                      <div>

                        <header class="next-card__header">
                          <div class="next-grid next-grid--no-padding next-grid--vertically-centered">
                            <div class="next-grid__cell">
                              <h2 class="next-heading">Images</h2>
                            </div>
                            <div class="next-grid__cell next-grid__cell--no-flex">
                              <div class="next-grid next-grid--no-outside-padding next-grid--vertically-centered">
                                <div class="next-grid__cell next-grid__cell--no-flex">
                                  <div class="styled-file-input">
                                    <div class="btn btn--link">
                                      <label>Upload image</label>
                                      <input id="image-upload" (change)="onFileChange($event)" #fileInput
                                             multiple="" accept="image/*" class="js-no-dirty" type="file">
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </header>

                        <div class="next-card__section">
                          <div class="ui-banner ui-banner--status-warning hide">
                            <div class="ui-banner__ribbon">
                              <svg class="next-icon next-icon--size-20 next-icon--no-nudge">
                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#alert-circle"></use>
                              </svg>
                            </div>
                            <div class="ui-banner__content">
                              <div class="ui-banner__content-text"><h2 class="ui-banner__title">The following images
                                could not be added:</h2>
                                <div class="ui-type-container ui-type-container--spacing-tight">
                                  <ul id="product-image-errors"></ul>
                                </div>
                              </div>
                              <div class="ui-banner__content-button">
                                <div class="button-group">
                                  <label class="btn btn--outline" for="image-upload">
                                    Try another image
                                  </label>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="next-upload-dropzone__wrapper">
                            <ol id="product-images" *ngIf="productImages.length" dnd-sortable-container
                                [sortableData]="productImages"
                                class="product-photo-grid  clearfix ui-sortable">
                              <li *ngFor="let image of productImages; let i=index" dnd-sortable [sortableIndex]="i"
                                  (onDropSuccess)="onDragPositionImage(i,image)"
                                  class="js-product-photo-grid-item product-photo-grid__item">
                                <div class="aspect-ratio aspect-ratio--square">

                                  <img class="aspect-ratio__content"
                                       src="{{image.src}}">

                                  <div class="product-photo-hover-overlay drag">
                                    <ul class="photo-overlay-actions">
                                      <li>
                                        <a class="photo-overlay-actions__link tooltip tooltip-top">
                                          <svg role="img" class="next-icon next-icon--color-white next-icon--size-16"
                                               aria-labelledby="next-preview-09abc36f4364ae39de10edfc55c777a2-title">
                                            <title id="next-preview-09abc36f4364ae39de10edfc55c777a2-title">preview
                                              icon</title>
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                 xlink:href="#next-preview"></use>
                                          </svg>
                                          <span class="tooltip-container"><span
                                            class="tooltip-label">Preview</span></span>
                                        </a>
                                      </li>
                                      <li>
                                        <a
                                          class="photo-overlay-actions__link--edit-with-aviary photo-overlay-actions__link tooltip tooltip-top"
                                        >
                                          <svg role="img" class="next-icon next-icon--color-white next-icon--size-16"
                                               aria-labelledby="next-edit-45020641dd6f4c101913e7fa470046bb-title"><title
                                            id="next-edit-45020641dd6f4c101913e7fa470046bb-title">edit icon</title>
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                 xlink:href="#next-edit"></use>
                                          </svg>
                                          <span class="tooltip-container"><span class="tooltip-label">Edit image</span></span>
                                        </a>
                                      </li>
                                      <li>
                                        <a class="photo-overlay-actions__link tooltip tooltip-top">
                                          <svg role="img" class="next-icon next-icon--color-white next-icon--size-16"
                                               aria-labelledby="next-alt-text-f9412b29b1a07fdde55863baa2006ac5-title">
                                            <title id="next-alt-text-f9412b29b1a07fdde55863baa2006ac5-title">alt-text
                                              icon</title>
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                 xlink:href="#next-alt-text"></use>
                                          </svg>
                                          <span class="tooltip-container"><span
                                            class="tooltip-label">Edit alt text</span></span>
                                        </a>
                                      </li>
                                      <li>
                                        <a (click)="showPopupDeleteImage(image)"
                                           dclass="photo-overlay-actions__link tooltip tooltip-top">
                                          <svg role="img" class="next-icon next-icon--color-white next-icon--size-20"
                                               aria-labelledby="delete-minor-3c0bfb8dd3458f8abe38aa3a32218b5f-title">
                                            <title id="delete-minor-3c0bfb8dd3458f8abe38aa3a32218b5f-title">delete
                                              icon</title>
                                            <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                 xlink:href="#delete-minor"></use>
                                          </svg>
                                          <span class="tooltip-container"><span
                                            class="tooltip-label">Delete</span></span>
                                        </a>
                                      </li>
                                    </ul>

                                  </div>

                                </div>
                              </li>

                            </ol>
                            <div class="hide">
                              <div
                                class="next-upload-dropzone next-upload-dropzone--overlay next-upload-dropzone--active">
                                <div class="next-upload-dropzone__hit-area next-upload-dropzone__hit-area--padded">

                                  <svg class="next-icon next-icon--size-24 next-upload-dropzone__icon">
                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#next-dropzone"></use>
                                  </svg>

                                  <h3 class="next-heading next-heading--no-margin next-upload-dropzone__heading">
                                    <div class="styled-file-input hide">
                                      Add images<input type="file"
                                                       multiple="" accept="image/*" class="js-no-dirty">
                                      or drag and drop to upload
                                    </div>
                                    <div aria-hidden="true">
                                      Drop files to upload
                                    </div>
                                  </h3>
                                </div>

                              </div>
                            </div>
                            <a
                              class="show show-all-product-images show-all-product-images--more-than-3 show-all-product-images--more-than-5 show-all-product-images--more-than-7 "

                              href="javascript:">Show all images</a>
                          </div>
                        </div>

                      </div>


                    </section>
                  </div>

                  <div class="ui-layout__item" id="product-outer-variants">
                    <div>

                      <section
                        *ngIf=" product?.variant?.option1 == 'Default Title' && product?.variant?.title == 'Default Title'"
                        class="ui-card">
                        <header class="ui-card__header"><h2 class="ui-heading">Pricing</h2></header>

                        <div formGroupName="variant" class="ui-card__section">
                          <div class="ui-type-container">
                            <input type="hidden" formControlName="id" [(ngModel)]="product.variant.id">
                            <input type="hidden" formControlName="product_id"
                                   [(ngModel)]="product.variant.product_id">
                            <input type="hidden" formControlName="metafield"
                                   [(ngModel)]="product.variant.metafield">
                            <input type="hidden" formControlName="position" [(ngModel)]="product.variant.position">
                            <input type="hidden" formControlName="inventory_policy"
                                   [(ngModel)]="product.variant.inventory_policy">
                            <input type="hidden" formControlName="inventory_quantity"
                                   [(ngModel)]="product.variant.inventory_quantity">
                            <input type="hidden" formControlName="image_url" [(ngModel)]="product.variant.image_url">
                            <input type="hidden" formControlName="image_id" [(ngModel)]="product.variant.image_id">
                            <input type="hidden" formControlName="metafields_global_harmonized_system_code"
                                   [(ngModel)]="product.variant.metafields_global_harmonized_system_code">
                            <input type="hidden" formControlName="option1" [(ngModel)]="product.variant.option1">
                            <input type="hidden" formControlName="option2" [(ngModel)]="product.variant.option2">
                            <input type="hidden" formControlName="option3" [(ngModel)]="product.variant.option3">
                            <input type="hidden" formControlName="requires_shipping"
                                   [(ngModel)]="product.variant.requires_shipping">
                            <input type="hidden" formControlName="taxable" [(ngModel)]="product.variant.taxable">
                            <input type="hidden" formControlName="title" [(ngModel)]="product.variant.title">
                            <div class="ui-form__section">
                              <div class="ui-form__group">
                                <div class="next-input-wrapper">

                                  <label class="next-label">Price</label>
                                  <div class="next-input--stylized next-input--has-content">
                                    <span class="next-input__add-on next-input__add-on--before">$</span>
                                    <input formControlName="price"
                                           [(ngModel)]="product.variant.price"
                                           class="next-input next-input--invisible js-money-field" placeholder="0.00"
                                           type="text">
                                  </div>
                                </div>
                                <div class="next-input-wrapper">
                                  <label class="next-label">Compare a price</label>
                                  <div class="next-input--stylized">
                                    <span class="next-input__add-on next-input__add-on--before">$</span>
                                    <input formControlName="compare_at_price"
                                           [(ngModel)]="product.variant.compare_at_price "
                                           class="next-input next-input--invisible js-money-field"
                                           type="text">
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="next-input-wrapper">
                              <label class="next-label next-label--switch"
                                     for="variant-taxable">Charge taxes on this
                                product</label><input id="variant-taxable" value="1"
                                                      class="next-checkbox" checked="checked" type="checkbox"><span
                              class="next-checkbox--styled"><svg class="next-icon next-icon--size-10 checkmark"> <use
                              xlink:href="#next-checkmark-thick"></use> </svg></span></div>
                            <input name="product[variant][taxable]" id="product_variant_taxable" value="true"
                                   type="hidden">
                          </div>
                        </div>
                      </section>
                      <section
                        *ngIf=" product?.variant?.option1 == 'Default Title' && product?.variant?.title == 'Default Title'"
                        class="ui-card">
                        <header class="ui-card__header"><h2 class="ui-heading">Inventory</h2></header>

                        <div formGroupName="variant" class="ui-card__section">
                          <div class="ui-type-container">
                            <div class="next-grid next-grid--no-outside-padding">
                              <div class="next-grid__cell">
                                <div class="next-input-wrapper">
                                  <label class="next-label" for="variant-sku">SKU <span class="note">(Stock Keeping Unit)</span>
                                  </label>
                                  <input id="variant-sku" formControlName="sku"
                                         [(ngModel)]="product.variant.sku"
                                         class="next-input" type="text">
                                </div>
                              </div>
                              <div class="next-grid__cell">
                                <div class="next-input-wrapper"><label class="next-label"
                                                                       for="variant-barcode">Barcode
                                  <span class="note">(ISBN, UPC, GTIN, etc.)</span></label>
                                  <input
                                    formControlName="barcode" [(ngModel)]="product.variant.barcode"
                                    id="variant-barcode"
                                    class="next-input" type="text">
                                </div>
                              </div>
                            </div>

                            <div class="next-grid next-grid--no-outside-padding">
                              <div class="next-grid__cell">
                                <div class="next-input-wrapper"><label class="next-label"
                                                                       for="variant-inventory-management">Inventory
                                  policy</label>
                                  <div class="ui-select__wrapper">
                                    <select formControlName="inventory_management"
                                            id="variant-inventory-management"
                                            class="ui-select ui-select">
                                      <option [selected]="product.variant.inventory_management == ''" value="">Don't
                                        track inventory
                                      </option>
                                      <option [selected]="product.variant.inventory_management == 'shopify'"
                                              value="shopify">Shopify tracks this product's inventory
                                      </option>
                                    </select>
                                    <svg class="next-icon next-icon--size-16">
                                      <use xlink:href="#select-chevron"></use>
                                    </svg>
                                  </div>
                                </div>
                              </div>

                              <div class="next-grid__cell next-grid__cell--quarter">
                                <div class="hide">
                                  <div>
                                    <div class="next-input-wrapper"><label class="next-label"
                                                                           for="product_variant_inventory_quantity">Quantity</label><input
                                      name="product[variant][inventory_quantity]"
                                      id="product_variant_inventory_quantity" value="1"
                                      class="next-input next-input--number quantity-field next-input next-input--number no-spinbox"
                                      disabled=""
                                      type="number"></div>
                                  </div>
                                </div>
                              </div>
                              <div class="next-grid__cell next-grid__cell--quarter">
                              </div>
                            </div>

                            <div class="next-grid next-grid--no-outside-padding hide">
                              <div class="next-grid__cell">
                                <div class="next-input-wrapper"><label class="next-label next-label--switch"
                                                                       for="variant-inventory_policy">Allow customers to
                                  purchase this product when it's out of stock</label><input
                                  id="variant-inventory_policy" value="1"
                                  class="next-checkbox" type="checkbox"><span class="next-checkbox--styled"><svg
                                  class="next-icon next-icon--size-10 checkmark"> <use
                                  xlink:href="#next-checkmark-thick"></use> </svg></span></div>
                                <input name="product[variant][inventory_policy]" id="product_variant_inventory_policy"
                                       value="deny" type="hidden">
                              </div>
                            </div>
                          </div>
                        </div>
                      </section>

                      <section
                        *ngIf=" product?.variant?.option1 == 'Default Title' && product?.variant?.title == 'Default Title'"
                        formGroupName="variant" class="ui-card">
                        <header class="ui-card__header"><h2 class="ui-heading">Shipping</h2></header>

                        <div class="ui-card__section">
                          <div class="ui-type-container">
                            <div class="ui-stack ui-stack--wrap">
                              <div class="next-input-wrapper"><label class="next-label next-label--switch"
                                                                     for="variant-requires_shipping">This product
                                requires shipping</label><input id="variant-requires_shipping" value="1"
                                                                class="next-checkbox" checked="checked" type="checkbox"><span
                                class="next-checkbox--styled"><svg class="next-icon next-icon--size-10 checkmark"> <use
                                xlink:href="#next-checkmark-thick"></use> </svg></span></div>
                              <input name="product[variant][requires_shipping]" id="product_variant_requires_shipping"
                                     value="true" type="hidden">
                            </div>
                          </div>
                        </div>
                        <div class="ui-card__section">
                          <div class="ui-type-container">
                            <div class="ui-stack ui-stack--wrap ui-stack--vertical ui-stack--spacing-tight">
                              <h3 class="ui-subheading">Weight</h3>
                              <p class="type--subdued">Used to calculate shipping rates at checkout.
                              </p>
                              <div class="ui-stack ui-stack--wrap ui-stack--distribution-equal-spacing">
                                <div class="ui-stack-item" style="max-width:215px">
                                  <div class="next-input-wrapper"><label class="next-label"
                                                                         for="product_variant_weight">Weight</label>
                                    <div class="next-field__connected-wrapper">
                                      <input formControlName="grams" [(ngModel)]="product.variant.grams"
                                             id="product_variant_weight"
                                             class="next-field--connected next-input"
                                             type="text">
                                      <div
                                        class="ui-select__wrapper next-field--connected next-field--connected--no-flex next-input--has-content">
                                        <label class="next-label helper--visually-hidden"
                                               for="product_variant_weight_unit">Weight</label>
                                        <select formControlName="weight_unit" id="product_variant_weight_unit"
                                                label="Weight" class="ui-select">
                                          <option [selected]="product.variant.weight_unit =='lb'" value="lb">lb</option>
                                          <option [selected]="product.variant.weight_unit =='oz'" value="oz">oz</option>
                                          <option [selected]="product.variant.weight_unit =='kg'" value="kg">kg</option>
                                          <option [selected]="product.variant.weight_unit =='g'" value="g">g</option>
                                        </select>
                                        <svg class="next-icon next-icon--size-16">
                                          <use xlink:href="#select-chevron"></use>
                                        </svg>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="ui-stack ui-stack--wrap ui-stack--vertical ui-stack--spacing-tight">
                              <h3 class="ui-subheading">International Customs</h3>
                              <div class="ui-stack ui-stack--wrap">
                                <div class="next-input-wrapper"><label class="next-label" for="variant-hs-code">HS
                                  tariff code <span class="note"><a href="http://hts.usitc.gov/" target="_blank"
                                                                    rel="noopener noreferrer">  (look up code)</a></span></label>
                                  <input
                                    formControlName="metafields_global_harmonized_system_code"
                                    [(ngModel)]="product.variant.metafields_global_harmonized_system_code"
                                    id="variant-hs-code"
                                    class="next-input" type="text">
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <section class="ui-card__section">
                          <div class="ui-type-container">
                            <h3 class="ui-subheading">Fulfillment Service</h3>
                            <div class="ui-stack ui-stack--wrap ui-stack--spacing-none">
                              <div class="next-input-wrapper"><label class="next-label helper--visually-hidden"
                                                                     for="variant-fulfillment-service">Fulfillment
                                service</label>
                                <div class="ui-select__wrapper next-input--has-content"><select
                                  name="product[variant][fulfillment_service]" id="variant-fulfillment-service"
                                  class="ui-select">
                                  <option selected="selected" value="manual">Manual</option>
                                </select>
                                  <svg class="next-icon next-icon--size-16">
                                    <use xlink:href="#select-chevron"></use>
                                  </svg>
                                </div>
                              </div>
                            </div>
                            <p class="hide">You must use the same SKU
                              that your fulfillment service uses for this variant.</p>
                          </div>
                        </section>
                      </section>
                      <section
                        *ngIf=" product?.variant?.option1 == 'Default Title' && product?.variant?.title == 'Default Title'"
                        class="ui-card">
                        <header class="ui-card__header">
                          <div class="ui-stack ui-stack--wrap">
                            <div class="ui-stack-item ui-stack-item--fill"><h2 class="ui-heading">Variants</h2></div>
                            <div class="ui-stack-item">
                              <div class="ui-stack ui-stack--wrap">
                                <div class="ui-stack-item">
                                  <button (click)="isCreateVariants = true" [class.hide]="isCreateVariants"
                                          class="ui-button ui-button--link" id="product-multiple-options" type="button"
                                          name="button">Add variant
                                  </button>
                                  <button (click)="isCreateVariants = false" [class.hide]="!isCreateVariants"
                                          class="ui-button ui-button--link " id="product-multiple-options"
                                          type="button" name="button">Cancel
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </header>

                        <div class="ui-card__section">
                          <div class="ui-type-container">
                            <p>Add variants if this product comes in multiple versions, like different sizes or
                              colors.</p>
                          </div>
                        </div>
                        <div [class.hide]="!isCreateVariants"
                             class="next-card__section next-card__section--subdued next-card--bottom-rounded-corners"
                        >
                          <table *ngIf=" dataForm.controls.options.controls.length" formArrayName="options"
                                 class="next-table table--no-side-padding table--no-border expanded js-options-table">
                            <thead>
                            <tr>
                              <th class="option-name" width="25%"><span>Option name</span></th>
                              <th class="option-values">Option values<span class="helper--visually-hidden">Separate options with a comma</span>
                              </th>
                              <th class="remove"></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let option of dataForm.controls.options.controls; let i=index"
                                [formGroupName]="i" class="options">
                              <td>
                                <div class="ui-popover__container"
                                     data-context="optionAutocomplete">
                                  <div class="relative">
                                    <div class="next-input-wrapper" style="top: 0">
                                      <input type="hidden" formControlName="id" [value]="option.get('id').value">
                                      <input type="hidden" formControlName="product_id"
                                             [value]="option.get('product_id').value">
                                      <input
                                        type="text" formControlName="name" [(ngModel)]="option.get('name').value"
                                        class="next-input js-option-name"
                                        aria-expanded="false"
                                        aria-haspopup="false"
                                        aria-owns="popover-dropdown-12" aria-controls="popover-announce-selected"
                                        role="combobox" aria-autocomplete="list"
                                        aria-activedescendant="selected-option-11">
                                    </div>
                                  </div>
                                  <div class="ui-popover ui-popover--no-focus"
                                       data-popover-relative-to-closest=".next-card"
                                       data-popover-css-vertical-margin="13" data-popover-css-horizontal-margin="16"
                                       data-popover-css-max-height="300" data-popover-css-max-width="550"
                                       id="ui-popover--6" aria-labelledby="product_options__name" aria-expanded="false"
                                       role="dialog" style="max-width: none; margin-right: 0px; margin-left: 0px;">
                                    <div class="ui-popover__tooltip"></div>
                                    <div class="ui-popover__content-wrapper">
                                      <div class="ui-popover__content">
                                        <div class="ui-popover__pane">
                                          <ul
                                            class="js-autocomplete-suggestions next-list next-list--compact next-list--toggles"
                                            role="listbox" id="popover-dropdown-12">


                                            <li role="option">
                                              <a class="next-list__item next-list__item--is-selected" selectable=""

                                                 id="selected-option-11">
                                                Size
                                              </a>
                                            </li>

                                            <li role="option">
                                              <a class="next-list__item" selectable=""
                                              >
                                                Material
                                              </a>
                                            </li>

                                            <li role="option">
                                              <a class="next-list__item" selectable=""
                                              >
                                                Style
                                              </a>
                                            </li>

                                            <li role="option">
                                              <a class="next-list__item" selectable=""
                                              >
                                                Title
                                              </a>
                                            </li>

                                          </ul>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </td>
                              <td>
                                <div class="tokenized relative js-option-value-list">
                                  <div
                                    class="next-token-list next-token-list--is-input tokenized-product-options option-{{i+1}} tagit ui-widget ui-widget-content ui-corner-all">
                                    <tag-input [formControlName]="'values'"
                                               (onAdd)="onAddValueOption()"
                                               (onRemove)="onAddValueOption()"
                                               name="values"
                                               [modelAsStrings]="true">
                                    </tag-input>
                                  </div>
                                  <div class="tooltip-error attached-to-bottom hide"
                                  >
                                    <ul class="error-list">
                                      <li></li>
                                    </ul>
                                  </div>
                                </div>
                              </td>
                              <td class="p-none remove">
                                <a (click)="removeOption(i)"
                                   class="remove-option btn btn--icon tooltip tooltip-bottom"
                                >
                                  <span class="tooltip-container"><span class="tooltip-label">Remove</span></span>
                                  <svg class="next-icon next-icon--color-blue next-icon--size-20">
                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#delete-minor"></use>
                                  </svg>
                                </a>
                              </td>
                            </tr>
                            <tr *ngIf="dataForm.controls.options.length < 3" class="js-add-option">
                              <td colspan="3">
                                <button (click)="addOption()" type="button" class="btn">Add another
                                  option
                                </button>
                              </td>
                            </tr>
                            </tbody>
                          </table>

                          <div class="box warning st sb hide">
                            <strong>Warning:</strong> Products can’t have more than 100 variants.
                          </div>

                          <div *ngIf="dataForm.controls.variants.controls.length" class="ppt">
                            <h3>Modify the variants to be created:</h3>
                            <div class="table-wrapper">
                              <table formArrayName="variants" class="ssb sst js-variants-table">
                                <thead>
                                <tr>
                                  <th class="select"></th>
                                  <th><span class="options-header">Variant</span></th>
                                  <th style="width:100px"><span>Price</span></th>
                                  <th style="min-width:100px"><span>SKU</span></th>
                                  <th style="min-width:100px"><span>Barcode</span></th>
                                  <th style="min-width:70px"
                                      class="hide"><span>Inventory</span></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr *ngFor="let vari of dataForm.controls.variants.controls; let i=index">
                                  <td [formGroupName]="i" class="select">
                                    <div class="next-input-wrapper next-input-wrapper--inline">

                                      <input type="checkbox" class="next-checkbox" checked="checked"
                                      >

                                      <span class="next-checkbox--styled"><svg
                                        class="next-icon next-icon--size-10 next-icon--blue checkmark"> <use
                                        xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#next-checkmark"></use> </svg></span>
                                    </div>
                                  </td>

                                  <td [formGroupName]="i">

                                    <span class="option-1">{{vari.get('option1').value}}</span>

                                    <span *ngIf="vari.get('option2').value != ''" class="type--subdued"> • </span>


                                    <span class="option-2">{{vari.get('option2').value}}</span>
                                    <span *ngIf="vari.get('option3').value != ''" class="type--subdued"> • </span>


                                    <span class="option-3">{{vari.get('option3').value}}</span>
                                  </td>

                                  <td [formGroupName]="i">
                                    <div class="next-input--stylized next-input--has-content">
                                      <span class="next-input__add-on next-input__add-on--before"></span>
                                      <input type="text"
                                             [(ngModel)]="vari.get('price').value"
                                             formControlName="price"
                                             class="select-all-on-focus next-input next-input--invisible js-money-field"
                                      >
                                    </div>
                                  </td>
                                  <td [formGroupName]="i">
                                    <input type="text"
                                           [(ngModel)]="vari.get('sku').value"
                                           formControlName="sku"
                                           class="select-all-on-focus next-input"
                                    >
                                  </td>
                                  <td [formGroupName]="i">
                                    <input type="text"
                                           [(ngModel)]="vari.get('barcode').value"
                                           formControlName="barcode"
                                           class="select-all-on-focus next-input"
                                    >
                                  </td>
                                </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>

                      </section>
                      <section
                        *ngIf=" product.variants.length && product?.variants[0]?.option1 != 'Default Title' && product?.variants[0]?.title != 'Default Title'"
                        class="ui-card">
                        <header class="ui-card__header">
                          <div class="ui-stack ui-stack--wrap">
                            <div class="ui-stack-item ui-stack-item--fill"><h2 class="ui-heading">Variants</h2></div>
                            <div class="ui-stack-item">
                              <div class="ui-stack ui-stack--wrap">
                                <div class="ui-stack-item">
                                  <button (click)="popupReorderOptionVariants.show()" class="ui-button ui-button--link"


                                          type="button" name="button">Reorder variants
                                  </button>
                                </div>
                                <div class="ui-stack-item">
                                  <button class="ui-button ui-button--link"
                                          (click)="popupChangeOptionsVariant.show()"

                                          type="button" name="button">Edit options
                                  </button>
                                </div>
                                <div class="ui-stack-item">
                                  <a href="javascript:" [routerLink]="['/products/'+product.id+'/variants/new']"
                                     class="btn--link"
                                  >Add
                                    variant</a>
                                </div>
                              </div>
                            </div>
                          </div>
                        </header>

                        <div class="has-bulk-actions">
                          <div class="ui-card__section">
                            <div class="ui-type-container">
                              <div>
                                <div data-context="variantOperations">
                                  <div class="variant-selector">
                                    <ul class="variant-selector-list">
                                      <li class="variant-selector-item">Select:</li>
                                      <li class="variant-selector-item"><a (click)="clickSelectAll(true)"
                                                                           class="variant-selector-link default-option"
                                      >All</a>
                                      </li>
                                      <li class="variant-selector-item"><a (click)="clickSelectAll(false)"
                                                                           class="variant-selector-link default-option"
                                      >None</a>
                                      </li>
                                    </ul>
                                    <ul *ngIf="product.options[0]" class="variant-selector-list">
                                      <li
                                        ngif="product.options[0].values.length"
                                        *ngFor="let val of product.options[0].values"
                                        (click)="clickFilterByOptionValue('option1',val)"
                                        class="variant-selector-item option-1 variant-selector-link"
                                      >
                                        {{val}}
                                      </li>
                                    </ul>
                                    <ul *ngIf="product.options[1]" class="variant-selector-list">
                                      <li
                                        ngif="product.options[1].values.length"
                                        *ngFor="let val of product.options[1].values"
                                        (click)="clickFilterByOptionValue('option2',val)"
                                        class="variant-selector-item option-2 variant-selector-link"
                                      >
                                        {{val}}
                                      </li>
                                    </ul>
                                    <ul *ngIf="product.options[2]" class="variant-selector-list">
                                      <li
                                        ngif="product.options[2].values.length"
                                        *ngFor="let val of product.options[2].values"
                                        (click)="clickFilterByOptionValue('option3',val)"
                                        class="variant-selector-item option-3 variant-selector-link"
                                      >
                                        {{val}}
                                      </li>
                                    </ul>
                                  </div>
                                  <div formArrayName="variants" class="table-wrapper">
                                    <p-dataTable [tableStyleClass]="'table-hover new-variants-table'"
                                                 [(value)]="dataForm.controls.variants.controls">
                                      <p-column field="id">
                                        <ng-template let-col let-dat="rowData" pTemplate="header">
                                          <div class="select">
                                            <div
                                              class="tooltip tooltip-left-align tooltip-bottom bulk-actions__select-all-tooltip">
                                              <div class="next-input-wrapper bulk-actions__select-all btn--select-all">
                                                <label
                                                  class="next-label next-label--switch {{ selectList.length ? 'helper--visually-hidden':'btn btn-slim bulk-actions__select-all-btn'}} "
                                                  for="bulk-actions__select-all">
                                                  <span class="helper--visually-hidden">Select all variants</span>
                                                </label>
                                                <input #selectAll (change)="clickSelectAll(selectAll.checked)"
                                                       [checked]="selectList.length"
                                                       name="bulk-actions__select-all" id="bulk-actions__select-all"
                                                       class="next-checkbox js-no-dirty bulk-actions__select-all-checkbox"
                                                       type="checkbox">
                                                <span class="next-checkbox--styled">
                                                <svg class="next-icon next-icon--size-10 checkmark"> <use
                                                  xlink:href="#next-checkmark-thick">

                                                </use>
                                                </svg>
                                                <svg class="next-icon next-icon--size-10 indeterminate"> <use
                                                  xlink:href="#next-minus">

                                                </use>
                                                </svg>
                                                </span>
                                              </div>
                                              <div class="tooltip-container">
                                                <span class="tooltip-label">Select all variants</span>
                                              </div>
                                            </div>

                                            <div [class.bulk-actions--is-visible]="selectList.length"
                                                 class="bulk-actions ">
                                              <ul class="bulk-actions__main-bar segmented">
                                                <li>
                                                  <a class="btn btn-slim btn-disabled btn--selection">
                                                    <span class="selection-count">
                                                    <span>{{selectList.length}}</span> selected
                                                    </span>
                                                  </a>
                                                </li>
                                                <li>
                                                  <a
                                                    [routerLink]="['/products/'+product.id+'/variants-bulk', {ids:selectList}]"
                                                    class="btn btn-slim">
                                                    Edit variants
                                                  </a>
                                                </li>
                                                <li>
                                                  <div
                                                    (click)="isShowBulkAction = true"
                                                    (clickOutside)="isShowBulkAction=false"
                                                    [attachOutsideOnClick]="true"
                                                    class="ui-popover__container">
                                                    <button class="ui-button ui-button--size-small" type="button"
                                                            name="button">
                                                      Bulk actions
                                                      <svg class="next-icon next-icon--size-20">
                                                        <use xlink:href="#next-disclosure"></use>
                                                      </svg>
                                                    </button>
                                                    <div [class.ui-popover--is-active]="isShowBulkAction"
                                                         class="ui-popover ui-popover--full-height ui-popover--is-active ui-popover--is-positioned-beneath"
                                                         data-popover-css-vertical-margin="13"
                                                         data-popover-css-horizontal-margin="16"
                                                         data-popover-css-max-height="10000"
                                                         data-popover-css-max-width="550" id="ui-popover--5"
                                                         aria-labelledby="ui-popover-activator--5" aria-expanded="true"
                                                         role="dialog"
                                                         style="max-width: none; margin-right: 0px; margin-left: 0px; transform-origin: 117px -5px 0px; left: -58px;">
                                                      <div class="ui-popover__tooltip" style="left: 117px;">
                                                      </div>
                                                      <div class="ui-popover__content-wrapper">
                                                        <div class="ui-popover__content"
                                                             style="max-height: 283px; width: 208px;">
                                                          <div
                                                            class="ui-popover__pane">


                                                            <div
                                                              class="ui-popover__section ui-popover__section--no-padding">
                                                              <ul class="next-list next-list--compact">
                                                                <li>
                                                                  <a (click)="popupChangePriceVariant.show()"
                                                                     class="next-list__item">
                                                                    Change prices
                                                                  </a>
                                                                </li>
                                                                <li>
                                                                  <a (click)="popupChangeQuantityVariant.show()"
                                                                     class="next-list__item">
                                                                    Update quantity
                                                                  </a>
                                                                </li>

                                                                <li>
                                                                  <a
                                                                    (click)="PopupManagerImagesComponent.showPopup(product,imgIDVariantSelected,selectList,listVariantsChange)"
                                                                    class="next-list__item">Update images</a>
                                                                </li>
                                                                <li>
                                                                  <a (click)="popupMultiVariantDelete.show()"
                                                                     class="next-list__item">Delete variants</a>
                                                                </li>
                                                                <li>
                                                                  <a (click)="changeInventoryPolicy(1)"
                                                                     class="next-list__item">Continue selling when
                                                                    sold
                                                                    out</a>
                                                                </li>
                                                                <li>
                                                                  <a (click)="changeInventoryPolicy(0)"
                                                                     class="next-list__item">Stop selling when sold
                                                                    out</a>
                                                                </li>
                                                                <li>
                                                                  <h3
                                                                    class="next-heading next-heading--micro-uppercase-bordered">
                                                                    Duplicate variants…</h3>
                                                                </li>
                                                                <li ngif="product.options.length"
                                                                    *ngFor="let option of product.options">
                                                                  <a [class.is-disabled]="selectList.length != 1"
                                                                     (click)="selectList.length == 1 ? showPopupDuplicateVariant(option.name) : ''"
                                                                     class="next-list__item bulk-action-duplicate-variant is-disabled">…
                                                                    in another {{option.name}}</a>
                                                                </li>
                                                              </ul>
                                                            </div>

                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </li>
                                              </ul>
                                            </div>
                                          </div>
                                        </ng-template>
                                        <ng-template let-i="rowIndex" let-col let-dat="rowData" pTemplate="body">
                                          <div [formGroupName]="i" class="next-input-wrapper">
                                            <input [value]="dat.get(col.field).value"
                                                   [checked]="selectList.indexOf(dat.get(col.field).value) != -1"
                                                   id="product_ids_{{dat.get(col.field).value}}"
                                                   class="next-checkbox input-checkbox "
                                                   (change)="clickSelect(dat.value,$event.target.checked)"
                                                   name='product_ids_{{dat.get(col.field).value}}'
                                                   type="checkbox" value="{{dat.get(col.field).value}}">
                                            <span class="next-checkbox--styled">
                                              <svg
                                                class="next-icon next-icon--size-10 checkmark">
                                              <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                   xlink:href="#next-checkmark-thick"></use>
                                              </svg>
                                              </span>
                                          </div>
                                        </ng-template>
                                      </p-column>
                                      <p-column field="image_url" header="">
                                        <ng-template let-i="rowIndex" let-col let-dat="rowData" pTemplate="body">
                                          <div [formGroupName]="i">
                                            <a
                                              class="aspect-ratio aspect-ratio--square aspect-ratio--square--50 aspect-ratio--interactive">
                                              <img class="aspect-ratio__content" [src]="dat.get(col.field).value">
                                            </a>
                                          </div>
                                        </ng-template>
                                      </p-column>
                                      <p-column ngif="product.options.length"
                                                *ngFor="let option of product.options; let i=index"
                                                field="option{{i+1}}" header="{{option.name}}">
                                        <ng-template let-index="rowIndex" let-col let-dat="rowData" pTemplate="body">

                                          <div [formGroupName]="index">
                                            <input type="text"
                                                   [value]="dat.get(col.field).value"
                                                   formControlName="option{{i+1}}"
                                                   class="variant-table-input--option-value edit-on-hover option option-{{i+1}}"
                                            >
                                          </div>
                                        </ng-template>
                                      </p-column>
                                      <p-column ngif="tableVariantsMore.length"
                                                *ngFor="let more of tableVariantsMore; let i=index"
                                                field="{{more.col}}" header="{{more.header}}">
                                        <ng-template let-index="rowIndex" let-col let-dat="rowData" pTemplate="body">
                                          <div [formGroupName]="index">
                                            <input type="text"
                                                   [value]="dat.get(col.field).value"
                                                   formControlName="{{more.col}}"
                                                   class="becomes-numerical-on-edit edit-on-hover tc variant-table-input--numeric"
                                            >
                                          </div>
                                        </ng-template>
                                      </p-column>
                                      <p-column field="price" header="Price">
                                        <ng-template let-col let-i="rowIndex" let-dat="rowData" pTemplate="body">
                                          <div [formGroupName]="i">
                                            <input
                                              [value]="dat.get(col.field).value"
                                              formControlName="price"
                                              class="mock-edit-on-hover tr js-no-dirty js-variant-price variant-table-input--numeric">
                                          </div>
                                        </ng-template>
                                      </p-column>
                                      <p-column field="sku" header="Sku">
                                        <ng-template let-i="rowIndex" let-col let-dat="rowData" pTemplate="body">
                                          <div [formGroupName]="i">
                                            <input
                                              [value]="dat.get(col.field).value"
                                              formControlName="sku"
                                              class="mock-edit-on-hover variant-table-input--sku-barcode">
                                          </div>
                                        </ng-template>
                                      </p-column>
                                      <p-column>
                                        <ng-template let-i="rowIndex" let-col let-dat="rowData" pTemplate="body">
                                          <div [formGroupName]="i"
                                               class="next-field__connected-wrapper next-field__connected-wrapper--align-right">
                                            <a class="btn btn-slim next-field--connected next-field--connected--no-flex"
                                               href="/admin/products/10518222794/variants/4881402331166">
                                              <span>Edit</span>
                                            </a>
                                            <a (click)="showPopupDeleteVariant(dat)"
                                               class="btn btn-slim btn--icon next-field--connected next-field--connected--no-flex"
                                               href="javascript:">
                                              <svg class="next-icon next-icon--size-20">
                                                <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                     xlink:href="#delete-minor"></use>
                                              </svg>
                                            </a>
                                          </div>
                                        </ng-template>
                                      </p-column>
                                    </p-dataTable>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </section>
                    </div>
                  </div>
                  <div class="ui-layout__item">

                    <section class="ui-card">
                      <header class="ui-card__header">
                        <div class="ui-stack ui-stack--wrap">
                          <div class="ui-stack-item ui-stack-item--fill"><h2 class="ui-heading">Search engine listing
                            preview</h2></div>
                          <div class="ui-stack-item">
                            <div class="ui-stack ui-stack--wrap">
                              <div class="ui-stack-item">
                                <button (click)="editSearchEngine = !editSearchEngine" class="ui-button ui-button--link"
                                        type="button" name="button">Edit website SEO
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </header>


                      <div class="ui-card__section">
                        <div class="ui-type-container">
                          <div [class.hide]="!editSearchEngine" class="google-preview">
                            <span class="google__title"></span>
                            <div class="google__url">
                              https://mybeautyfriend.com/products/<span>{{product.handle}}</span>
                            </div>
                            <div class="google__description"></div>
                          </div>

                          <p class="" [innerHTML]="product.metafield_description"></p>
                        </div>
                      </div>
                      <div [class.hide]="!editSearchEngine" class="ui-card__section ">
                        <div class="ui-type-container">

                          <div class="ui-form__section">
                            <div class="next-input-wrapper">
                              <div class="ui-form__label-wrapper"><label class="next-label" for="seo-title-tag">Page
                                title</label><span class="type--subdued">0 of 70 characters used</span>
                              </div>
                              <input id="seo-title-tag"
                                     class="next-input" size="30" formControlName="metafield_title"
                                     [(ngModel)]="product.metafield_title"
                                     placeholder="" type="text"></div>

                            <div class="next-input-wrapper">
                              <div class="ui-form__label-wrapper"><label class="next-label" for="seo-description-tag">Meta
                                description</label><span class="type--subdued">0 of 160 characters used</span>
                              </div>
                              <textarea id="seo-description-tag" editable-placeholder="true"
                                        class="ui-text-area" formControlName="metafield_description"
                                        [(ngModel)]="product.metafield_description"
                                        placeholder=""></textarea></div>

                            <div class="ui-form__section">
                              <div class="next-input-wrapper"><label class="next-label" for="object-handle">URL and
                                handle</label>
                                <div class="next-input--stylized"><span
                                  class="next-input__add-on next-input__add-on--before">https://mybeautyfriend.com/products/</span><input
                                  id="object-handle" editable-placeholder="true"
                                  class="next-input next-input--invisible" formControlName="handle"
                                  [(ngModel)]="product.handle"
                                  placeholder="" type="text"></div>
                              </div>

                            </div>
                          </div>
                        </div>
                      </div>
                    </section>
                  </div>
                </div>
                <div class="ui-layout__section ui-layout__section--secondary">
                  <div class="ui-layout__item">

                    <section class="ui-card resource-feedbacks" id="ChannelsPublishingPanel">
                      <header class="ui-card__header">
                        <div class="ui-stack ui-stack--wrap">
                          <div class="ui-stack-item ui-stack-item--fill"><h2 class="ui-heading">
                            <span class="sales-channels-panel__header-content">Sales channels</span>
                          </h2></div>
                          <div class="ui-stack-item">
                            <div class="ui-stack ui-stack--wrap">
                              <div class="ui-stack-item">
                                <button class="ui-button btn--link"
                                        type="button" name="button">Manage
                                </button>
                                <div></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </header>


                      <div class="ui-card__section section--no-padding-top">
                        <div class="ui-type-container">
                          <p class="type--subdued">Available
                            on 2 of 2</p>
                        </div>
                      </div>


                      <section class="ui-card__section sales-channel"
                               aria-hidden="false">
                        <div class="ui-type-container">
                          <div class="ui-stack ui-stack--wrap ui-stack--alignment-center">
                            <div class="ui-stack-item ui-stack-item--fill">
                              <h3 class="ui-subheading">Online Store</h3>
                            </div>
                            <div class="ui-stack-item">
                              <div class="tooltip tooltip-top tooltip-right-align">
                                <button class="ui-button btn--plain btn--icon sales-channel__calendar-icon"
                                        type="button" name="button">
                                  <svg class="next-icon next-icon--size-20">
                                    <use xlink:href="#calendar-minor"></use>
                                  </svg>
                                </button>
                                <div class="tooltip-container">
                                  <p class="tooltip-label">Set publication date</p>
                                </div>
                              </div>
                            </div>
                          </div>
                          <input name="product[publications][][id]" id="product_publications__id" type="hidden">
                          <input name="product[publications][][channel_id]" id="product_publications__channel_id"
                                 value="78540999" type="hidden">
                          <input name="product[publications][][published]" id="product_publications__published"
                                 value="true"
                                 type="hidden">
                          <input name="product[publications][][published_at]" id="product_publications__published_at"
                                 value="2017-11-18 10:04:31 +0700" type="hidden">
                          <ul class="ui-content-list ui-content-list--bulleted ui-content-list--state-feedback hide">
                            <li
                              class="ui-content-list__item hide">
                              <p class="feedback__status type--subdued">
                                Will be published on: <br>
                                <time datetime="2017-11-18 10:04:31 +0700">November 18, 2017, 10:04am
                                  +07
                                </time>
                              </p>
                            </li>
                          </ul>
                          <div class="hide">
                            <p class="sales-channel-date-picker__label type--subdued">
                              Publish product on
                            </p>
                            <div class="ui-stack ui-stack--alignment-center">
                              <div class="ui-stack-item ui-stack-item--fill">
                                <div class="next-input-wrapper"><label class="next-label helper--visually-hidden">Publish
                                  date/time</label>
                                  <div class="next-field__connected-wrapper">
                                    <input id="publication-date-78540999"
                                           class="next-field--connected next-input js-no-dirty hasDatepicker"
                                           placeholder="Date" type="text">
                                    <input id="publication-time-78540999"
                                           class="next-field--connected next-input js-no-dirty ui-timepicker-input"
                                           placeholder="Time" autocomplete="off"
                                           type="text">
                                  </div>
                                </div>
                              </div>
                              <div class="ui-stack-item">
                                <button class="ui-button btn--link"
                                        type="button" name="button">
                                  <svg class="next-icon next-icon--size-12">
                                    <use xlink:href="#next-remove"></use>
                                  </svg>
                                </button>
                              </div>
                            </div>
                            <div></div>
                          </div>
                        </div>
                      </section>

                      <section class="ui-card__section sales-channel"
                               aria-hidden="false">
                        <div class="ui-type-container">
                          <div class="ui-stack ui-stack--wrap ui-stack--alignment-center">
                            <div class="ui-stack-item ui-stack-item--fill">
                              <h3 class="ui-subheading">Facebook</h3>
                            </div>
                          </div>
                          <input name="product[publications][][id]" id="product_publications__id" type="hidden">
                          <input name="product[publications][][channel_id]" id="product_publications__channel_id"
                                 value="83830023" type="hidden">
                          <input name="product[publications][][published]" id="product_publications__published"
                                 value="true"
                                 type="hidden">
                        </div>
                      </section>
                      <div class="sales-channels-panel__expander"
                           aria-hidden="true">
                        <button class="ui-button ui-button--transparent ui-button--full-width hide" type="button"
                                name="button">
                          <span></span>
                          <svg class="next-icon next-icon--color-slate-lighter next-icon--size-24">
                            <use xlink:href="#next-disclosure"></use>
                          </svg>
                        </button>
                      </div>

                      <div class="ui-card__section hide section--text-align-center sales-channels-panel__empty-state">
                        <div class="ui-type-container">
                          <p>No sales channels selected</p>
                          <p>
                            <button class="ui-button ui-button--primary" type="button"
                                    name="button">Manage
                            </button>
                          </p>
                        </div>
                      </div>
                    </section>
                  </div>
                  <div class="ui-layout__item">
                    <section class="ui-card ui-card--type-aside">
                      <header class="ui-card__header">
                        <h2 class="ui-heading">Organization</h2></header>
                      <div class="ui-card__section">
                        <div class="ui-type-container">
                          <div class="next-input-wrapper">
                            <label>Product type</label>
                            <div (click)="isShowProductType = true"
                                 (clickOutside)="isShowProductType=false"
                                 [attachOutsideOnClick]="true"
                                 class="ui-popover__container ui-popover__container--full-width-container ui-popover__container--contains-active-popover">
                              <div>
                                <div class="next-field__connected-wrapper">
                                  <input
                                    class="next-input next-field--connected" placeholder="Shirts" size="30"
                                    type="text"
                                    formControlName="product_type"
                                    [(ngModel)]="product.product_type"
                                    #productTypeSearchVari
                                    (keyup)="boxProductTypeSearch.next(productTypeSearchVari.value)"
                                    id="product_product_type" aria-expanded="true"
                                    aria-haspopup="false" aria-owns="popover-dropdown-2"
                                    aria-controls="popover-announce-selected" role="combobox"
                                    aria-autocomplete="list" aria-activedescendant="selected-option-1">
                                  <a class="btn btn--icon next-field--connected next-field--connected--no-flex"
                                  >
                                    <svg class="next-icon next-icon--color-slate-lighter next-icon--size-16">
                                      <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                           xlink:href="#next-arrow-double"></use>
                                    </svg>
                                  </a>
                                </div>

                                <div class="tooltip-error attached-to-bottom hide">
                                  <ul class="error-list">
                                    <li></li>
                                  </ul>
                                </div>
                              </div>

                              <div [class.ui-popover--is-active]="isShowProductType"
                                   class="ui-popover ui-popover--full-width ui-popover--no-focus ui-popover--is-positioned-beneath"
                                   data-popover-horizontally-relative-to-closest=".next-card"
                                   data-popover-css-vertical-margin="13" data-popover-css-horizontal-margin="16"
                                   data-popover-css-max-height="300" data-popover-css-max-width="10000"
                                   id="ui-popover--1"
                                   aria-labelledby="product_product_type" aria-expanded="true" role="dialog"
                                   style="margin-right: 0px; margin-left: 0px; transform-origin: 50% -5px 0px;">
                                <div class="ui-popover__tooltip"></div>
                                <div class="ui-popover__content-wrapper">
                                  <div class="ui-popover__content" style="max-height: 273px;">
                                    <div class="ui-popover__pane">
                                      <ul
                                        class="js-autocomplete-suggestions next-list next-list--compact next-list--toggles"
                                        role="listbox" id="popover-dropdown-2">
                                        <li role="option" *ngIf="productTypeSearch!= ''">
                                          <a (click)="addProductType(productTypeSearch,true)"
                                             class="next-list__item next-list__item--promoted-action next-list__item--is-selected"
                                             selectable="">
                                            <div class="next-grid next-grid--no-outside-padding next-grid--compact">
                                              <div
                                                class="next-grid__cell next-grid__cell--no-flex next-grid__cell--vertically-centered">
                                                <svg style="overflow: visible; /* fixes clipping in Chrome */"
                                                     class="next-icon next-icon--size-12 next-icon next-icon--12 block">
                                                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                       xlink:href="#next-add-circle"></use>
                                                </svg>
                                              </div>
                                              <div class="next-grid__cell">
                                                <strong>Add</strong> "{{productTypeSearch}}"
                                              </div>
                                            </div>
                                          </a>
                                        </li>
                                        <li ngif="productType.length" role="option" *ngFor="let type of productType">
                                          <a (click)="addProductType(type.title)"
                                             [class.next-list__item--is-selected]="type.title == product.product_type"
                                             class="next-list__item " selectable=""
                                             id="selected-option-1">
                                            {{type.title}}
                                          </a>
                                        </li>
                                      </ul>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="next-input-wrapper">
                            <label>Vendor</label>
                            <div (click)="isShowVendor = true"
                                 (clickOutside)="isShowVendor=false"
                                 [attachOutsideOnClick]="true"
                                 class="ui-popover__container ui-popover__container--full-width-container ui-popover__container--contains-active-popover">
                              <div>
                                <div class="next-field__connected-wrapper">
                                  <input
                                    class="next-input next-field--connected" placeholder="Shirts" size="30"
                                    type="text"
                                    formControlName="vendor"
                                    [(ngModel)]="product.vendor"
                                    #vendorSearchVari
                                    (keyup)="boxVendorSearch.next(vendorSearchVari.value)"
                                    aria-expanded="true"
                                    aria-haspopup="false" aria-owns="popover-dropdown-2"
                                    aria-controls="popover-announce-selected" role="combobox"
                                    aria-autocomplete="list" aria-activedescendant="selected-option-1">
                                  <a class="btn btn--icon next-field--connected next-field--connected--no-flex"
                                  >
                                    <svg class="next-icon next-icon--color-slate-lighter next-icon--size-16">
                                      <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                           xlink:href="#next-arrow-double"></use>
                                    </svg>
                                  </a>
                                </div>

                                <div class="tooltip-error attached-to-bottom hide">
                                  <ul class="error-list">
                                    <li></li>
                                  </ul>
                                </div>
                              </div>

                              <div [class.ui-popover--is-active]="isShowVendor"
                                   class="ui-popover ui-popover--full-width ui-popover--no-focus ui-popover--is-positioned-beneath"
                                   data-popover-horizontally-relative-to-closest=".next-card"
                                   data-popover-css-vertical-margin="13" data-popover-css-horizontal-margin="16"
                                   data-popover-css-max-height="300" data-popover-css-max-width="10000"
                                   aria-labelledby="product_product_type" aria-expanded="true" role="dialog"
                                   style="margin-right: 0px; margin-left: 0px; transform-origin: 50% -5px 0px;">
                                <div class="ui-popover__tooltip"></div>
                                <div class="ui-popover__content-wrapper">
                                  <div class="ui-popover__content" style="max-height: 273px;">
                                    <div class="ui-popover__pane">
                                      <ul
                                        class="js-autocomplete-suggestions next-list next-list--compact next-list--toggles"
                                        role="listbox">
                                        <li role="option" *ngIf="vendorSearch!= ''">
                                          <a (click)="addVendor(vendorSearch,true)"
                                             class="next-list__item next-list__item--promoted-action next-list__item--is-selected"
                                             selectable="">
                                            <div class="next-grid next-grid--no-outside-padding next-grid--compact">
                                              <div
                                                class="next-grid__cell next-grid__cell--no-flex next-grid__cell--vertically-centered">
                                                <svg style="overflow: visible; /* fixes clipping in Chrome */"
                                                     class="next-icon next-icon--size-12 next-icon next-icon--12 block">
                                                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                       xlink:href="#next-add-circle"></use>
                                                </svg>
                                              </div>
                                              <div class="next-grid__cell">
                                                <strong>Add</strong> "{{vendorSearch}}"
                                              </div>
                                            </div>
                                          </a>
                                        </li>
                                        <li ngif="productType.length" role="option"
                                            *ngFor="let vendor of productVendor">
                                          <a (click)="addVendor(vendor.title)"
                                             [class.next-list__item--is-selected]="vendor.title == product.vendor"
                                             class="next-list__item " selectable=""
                                             id="selected-option-1">
                                            {{vendor.title}}
                                          </a>
                                        </li>
                                      </ul>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="ui-card__section">
                        <div
                          (clickOutside)="isShowCollection=false"
                          [attachOutsideOnClick]="true"
                          class="ui-type-container">
                          <label for="collections" class="next-label">Collections</label>
                          <div id="js-collections" data-tg-refresh="js-collections"
                               data-context="productCollections">

                            <div class="ui-popover__container ui-popover__container--full-width-container">
                              <div class="next-input-wrapper">
                                <div class="next-input--stylized"><span
                                  class="next-input__add-on next-input__add-on--before"><svg
                                  class="next-icon next-icon--color-slate-lightest next-icon--size-16"> <use
                                  xlink:href="#next-search-reverse"></use> </svg></span>
                                  <input
                                    (click)="isShowCollection = true"
                                    class="next-input next-input--invisible next-input js-no-dirty next-input--invisible"
                                    placeholder="Search for collections" id="collections" size="30"
                                    #productCollectionsSearch
                                    (keyup)="boxSearchCollections.next(productCollectionsSearch.value)"
                                    aria-expanded="false"
                                    aria-haspopup="false" aria-owns="popover-dropdown-6"
                                    aria-controls="popover-announce-selected" role="combobox"
                                    aria-autocomplete="list"
                                    aria-activedescendant="selected-option-5" type="text"></div>
                              </div>
                              <div class="tooltip-error attached-to-bottom hide">
                                <ul class="error-list">
                                  <li></li>
                                </ul>
                              </div>
                              <div [class.ui-popover--is-active]="isShowCollection"
                                   class="ui-popover ui-popover--full-width ui-popover--no-focus  ui-popover--is-positioned-beneath ui-popover--is-active"
                                   data-popover-horizontally-relative-to-closest=".next-card"
                                   data-popover-css-vertical-margin="13" data-popover-css-horizontal-margin="16"
                                   data-popover-css-max-height="300" data-popover-css-max-width="10000"
                                   id="ui-popover--19"
                                   aria-labelledby="collections" aria-expanded="true" role="dialog"
                                   style="margin-right: 0px; margin-left: 0px; transform-origin: 50% -5px 0px;z-index: 1000">
                                <div class="ui-popover__tooltip"></div>
                                <div class="ui-popover__content-wrapper">
                                  <div class="ui-popover__content" style="max-height: 300px;">
                                    <div class="ui-popover__pane">
                                      <ul *ngIf="collectionsCustom.length"
                                          class="js-autocomplete-suggestions next-list next-list--compact next-list--toggles"
                                          role="listbox" id="popover-dropdown-38">
                                        <li *ngFor="let customCo of collectionsCustom" role="option">
                                          <a
                                            [class.next-list__item--is-applied]="selectedCollections.indexOf(customCo.id) != -1"
                                            class="next-list__item " (click)="addCollection(customCo)" selectable="">
                                            <div class="next-grid next-grid--no-outside-padding next-grid--compact">
                                              <div class="next-grid__cell next-grid__cell--no-flex">
                                                <svg class="next-icon next-icon--size-12">
                                                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                       xlink:href="#next-checkmark"></use>
                                                </svg>
                                              </div>
                                              <div class="next-grid__cell">
                                                {{customCo.title}}
                                              </div>
                                            </div>
                                          </a>
                                        </li>

                                      </ul>
                                      <div class="ui-popover__section hide">
                                        <p class="type--subdued tc">
    <span class="next-spinner">
      <svg class="next-icon next-icon--size-16"> <use xmlns:xlink="http://www.w3.org/1999/xlink"
                                                      xlink:href="#next-spinner"></use> </svg>
    </span>
                                          Loading…
                                        </p>
                                      </div>

                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>


                            <div id="product-collections" data-tg-refresh="product-collections">

                              <ul
                                class="js-collection-list product-collections-list next-list next-list--plain-divided next-list--row-hover next-list--no-vertical-padding">
                                <li ngif="product.custom_collections.length"
                                    *ngFor="let custom of product.custom_collections">
                                  <div class="next-grid next-grid--no-outside-padding next-grid--vertically-centered">
                                    <div class="next-grid__cell type--truncated" style="padding-right: 0">
                                      <a [routerLink]="['/collections', custom.id]" href="javascript:"
                                         class="product-collections-list__link tooltip-wordy tooltip-top"
                                         title="View the 'Sản Phẩm Mới' collection">
                                        {{custom.title}}
                                      </a>
                                    </div>
                                    <div class="next-grid__cell next-grid__cell--no-flex">
                                      <button (click)="addCollection(custom)"
                                              class="ui-button ui-button--size-small ui-button--icon-only ui-button--transparent"
                                              title="Remove from the 'Sản Phẩm Mới' collection">
                                        <i class="next-icon next-icon--10 next-icon--remove-slate-lighter"></i>
                                      </button>
                                    </div>
                                  </div>
                                </li>
                                <li ngif="product.smart_collections.length && product.id != -1"
                                    *ngFor="let smart of product.smart_collections" class="next-text-list__item">
                                  <div class="next-grid next-grid--no-outside-padding next-grid--vertically-centered">
                                    <div class="next-grid__cell type--truncated">
                                      <a [routerLink]="['/collections', smart.id]" href="javascript:"
                                         class="product-collections-list__link">
                                        {{smart.title}}
                                      </a>
                                    </div>
                                    <div class="next-grid__cell next-grid__cell--no-flex">
                                      <span class="product-collections-list__automatic-label"
                                            title="This product matches conditions set in the 'Basic Care' collection">Auto</span>
                                    </div>
                                  </div>
                                </li>
                              </ul>

                              <div *ngIf="!product.custom_collections.length && !product.smart_collections.length"
                                   id="add-to-collection">
                                <p class="next-input__help-text">Add this product to a collection so it’s easy to find
                                  in your store.</p>
                              </div>
                            </div>
                          </div>

                        </div>
                      </div>
                    </section>
                  </div>
                  <app-popup-manager-tags
                    [tagsExists]="product.tags"
                    [dataTags]="productTagTemp"
                    (reloadData)="reloadData($event)">
                  </app-popup-manager-tags>
                </div>
              </div>
            </div>

            <div class="ui-page-actions">
              <div class="ui-page-actions__container">
                <div class="ui-page-actions__actions ui-page-actions__actions--primary">
                  <div class="ui-page-actions__button-group">
                    <a class="btn" data-allow-default="1" routerLink="/products"
                       href="javascript:">Cancel</a>
                    <button name="button" type="submit"
                            class="btn js-btn-primary js-btn-loadable btn-primary has-loading">Save
                      product
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </form>

        </div>

      </div>
    </div>
  </div>
</main>
<div (onHidden)="popupImageDelete.hide()" [config]="{ show: false }" bsModal #popupImageDelete="bs-modal"
     class="wrap-popup">
  <div class="modal" data-tg-refresh="modal" id="modal_container" aria-hidden="false" aria-labelledby="ModalTitle"
       tabindex="-1" style="display: block;">
    <header>
      <h2 id="ModalTitle">Delete this image?</h2>
      <a href="javascript:" (click)="popupImageDelete.hide()" class="close-modal" role="button"
         aria-label="Close dialog">×</a>
    </header>
    <div class="body">
      <app-alert></app-alert>
      <p>
        Are you sure you want to delete this image and remove it from all variants?
        This action cannot be reversed.
      </p>
    </div>
    <div class="buttons">
      <a class="btn close-modal" (click)="popupImageDelete.hide()" href="javascript:">Cancel</a>
      <a (click)="deleteImage()" class="btn btn-destroy-no-hover js-btn-loadable" data-tg-remote="delete"
         data-tg-refresh-on-success="modal product-images-content variant-image-column"
         href="javascript:">Delete</a>
    </div>
  </div>
</div>
<div (onHidden)="popupProductTag.hide()" [config]="{ show: false }" bsModal #popupProductTag="bs-modal"
     class="wrap-popup">
  <div class="modal" data-tg-refresh="modal" id="modal_container" style="display: block;" aria-hidden="false"
       aria-labelledby="ModalTitle" tabindex="-1">
    <div>
      <div context="allTagsModal">
        <header>
          <h2 id="ModalTitle">Tags</h2>
          <a (click)="popupProductTag.hide()" href="javascript:" class="close-modal" role="button"
             aria-label="Close dialog">x</a>
        </header>

        <div class="body body--no-padding">

          <div class="next-card__section">
            <h2 class="next-heading next-heading--small">Applied tags</h2>
            <p class="sb hide">Select previously used tags from the list below to add them
              to this product.</p>
            <ul *ngIf="product?.tags.length" class="next-token-list next-token-list--expanded js-tag-list">
              <li *ngFor="let tag of product.tags" class="next-token">
                <span class="next-token__label">{{tag}}</span>

                <a (click)="addTag(tag)" class="next-token__remove">
                  <span class="next-token__remove__icon">
                    <svg class="next-icon next-icon--size-10 next-icon--no-nudge">
                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#next-remove"></use>
                    </svg>
                  </span>
                </a>
              </li>
              <!-- Tags list will go here -->
            </ul>
          </div>

          <div class="next-card__section" id="tags-list" refresh="tags-list">
            <div class="next-grid next-grid--no-outside-padding next-grid--vertically-centered">
              <div class="next-grid__cell">
                <h2 class="next-heading next-heading--small next-heading--no-margin">All Tags</h2>
              </div>

              <div class="next-grid__cell next-grid__cell--no-flex">
                <span class="next-label next-label--inline sr">Sort:</span>
                <ul class="segmented">
                  <li><a class="btn btn-slim active" refresh-on-success="tags-list" tg-remote="get"
                         href="javascript:">Alphabetically</a></li>
                  <li><a class="btn btn-slim " refresh-on-success="tags-list" tg-remote="get"
                         href="javascript:">Popularity</a></li>
                </ul>
              </div>
            </div>

            <ul *ngIf="productTag.length" class="next-token-list next-token-list--expanded sst">
              <li *ngFor="let tag of productTag" (click)="addTag(tag)"
                  [class.next-token--is-disabled]="product.tags.indexOf(tag) != -1"
                  class="next-token next-token--clickable next-token--is-inactive "
              >
                <span class="next-token__label">{{tag}}</span>
              </li>
            </ul>
          </div>

        </div>
        <div class="buttons">
          <a class="btn close-modal" (click)="popupProductTag.hide()()" href="javascript:">Cancel</a>
          <a class="btn close-modal btn-primary" (click)="popupProductTag.hide()" href="javascript:">Apply changes</a>
        </div>
      </div>
    </div>
  </div>
</div>
<div (onHidden)="popupVariantDelete.hide()" [config]="{ show: false }" bsModal #popupVariantDelete="bs-modal"
     class="wrap-popup">
  <div class="modal" data-tg-refresh="modal" id="modal_container" style="display: block;" aria-hidden="false"
       aria-labelledby="ModalTitle" tabindex="-1">
    <app-alert></app-alert>
    <header>
      <h2 id="ModalTitle">Delete {{variantDelete?.title}}?</h2>
      <a href="javascript:" (click)="popupVariantDelete.hide()" class="close-modal" role="button"
         aria-label="Close dialog">×</a>
    </header>

    <form autocomplete="off" data-tg-remote="true"
          class="edit_product_variant" id="edit_product_variant_4856729534494">
      <div class="body">
        <p>Are you sure you want to delete the variant <strong>{{variantDelete?.title}}</strong>? This action cannot be
          reversed.</p>
      </div>
      <div class="buttons">
        <button (click)="popupVariantDelete.hide()" class="ui-button close-modal" type="button" name="button">Cancel
        </button>
        <button (click)="deleteVariant()" class="ui-button js-btn-loadable btn-destroy-no-hover has-loading"
                type="submit" name="button">Delete
        </button>
      </div>
    </form>
  </div>
</div>
<div (onHidden)="popupMultiVariantDelete.hide()" [config]="{ show: false }" bsModal #popupMultiVariantDelete="bs-modal"
     class="wrap-popup">
  <div class="modal" data-tg-refresh="modal" id="modal_container" aria-hidden="false" aria-labelledby="ModalTitle"
       tabindex="-1" style="display: block;">
    <header>
      <h2 id="ModalTitle">Are you sure you want to delete the selected variants?</h2>
      <a (click)="popupMultiVariantDelete.hide()" href="javascript:" class="close-modal" role="button"
         aria-label="Close dialog">x</a>
    </header>
    <form>
      <div class="body">
        <p>You cannot recover deleted product variants, do you wish to continue?</p>
      </div>
      <div class="buttons">
        <button (click)="popupMultiVariantDelete.hide()" class="ui-button close-modal" type="button" name="button">
          Cancel
        </button>
        <button (click)="deleteMultiVariant()" class="ui-button js-btn-loadable btn-destroy-no-hover has-loading"
                type="submit" name="button">Delete
        </button>
      </div>
    </form>
  </div>
</div>
<div (onHidden)="popupChangePriceVariant.hide()" [config]="{ show: false }" bsModal #popupChangePriceVariant="bs-modal"
     class="wrap-popup">
  <div class="modal" data-tg-refresh="modal" id="modal_container" aria-hidden="false" aria-labelledby="ModalTitle"
       tabindex="-1" style="display: block;">
    <header>
      <h2 id="ModalTitle">Change prices</h2>
      <a (click)="popupChangePriceVariant.hide()" href="javascript:" class="close-modal" role="button"
         aria-label="Close dialog">x</a>
      <app-alert></app-alert>
    </header>
    <form>
      <div class="body">
        <label>New price</label>
        <input #priceVariants type="text">
      </div>
      <div class="buttons">
        <button (click)="popupChangePriceVariant.hide()" class="ui-button close-modal" type="button" name="button">
          Cancel
        </button>
        <button (click)="changePriceVariant(priceVariants.value)"
                class="ui-button js-btn-loadable btn-primary has-loading" type="submit" name="button">Save
        </button>
      </div>
    </form>
  </div>
</div>
<div (onHidden)="popupChangeQuantityVariant.hide()" [config]="{ show: false }" bsModal
     #popupChangeQuantityVariant="bs-modal"
     class="wrap-popup">
  <div class="modal" data-tg-refresh="modal" id="modal_container" aria-hidden="false" aria-labelledby="ModalTitle"
       tabindex="-1" style="display: block;">
    <header>
      <h2 id="ModalTitle">Update quantity</h2>
      <button (click)="popupChangeQuantityVariant.hide()" class="ui-button btn--link close-modal" type="button"
              name="button">Close modal
      </button>
    </header>
    <form context="form">
      <div class="body">
        <div class="next-input-wrapper"><label class="next-label"></label>
          <div class="next-field__connected-wrapper">
            <ul class="segmented">
              <li>
                <button [class.active]="!isSetQuantiyVariant" (click)="isSetQuantiyVariant = false" class="ui-button"
                        type="button" name="button">add
                </button>
              </li>
              <li>
                <button [class.active]="isSetQuantiyVariant" (click)="isSetQuantiyVariant = true" class="ui-button"
                        type="button" name="button">set
                </button>
              </li>
            </ul>

            <input type="number" #quantityVariant (change)="changeQuantity(quantityVariant.value)"
                   name="inventory_level" id="new-inventory-level"
                   class="next-field--connected next-input next-input--number next-input--width-4-characters"
            >
          </div>
        </div>
      </div>

      <div class="body body--no-padding modal-content">
        <div class="modal-content__aside">
          <div class="next-grid">
            <div class="next-grid__cell">


              <h3 class="sb">
                <strong
                >{{listVariantsChange.length}}
                  variants</strong> will be changed:
              </h3>
              <div *ngIf="listVariantsChange.length" class="table-wrapper">
                <table class="table-hover inventory-change-summary">
                  <tbody>
                  <tr *ngFor="let variant of listVariantsChange">
                    <td>{{product.title}} <span class="type--subdued">—</span> {{variant?.title}}</td>
                    <td width="20" class="tr">
                      <input type="hidden" id="previous-inventory-quantity-4856729567262" value="5">
                      <span class="inventory-quantity inventory-quantity__before">{{variant?.inventory_quantity}}</span>
                    </td>
                    <td width="16" class="js-quantity-after tr hide">
                      <svg class="next-icon next-icon--rotate-90 next-icon--color-slate-lightest next-icon--size-16">
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#next-arrow"></use>
                      </svg>
                    </td>
                    <td width="20" class="js-quantity-after tr ">
                      <span class="inventory-quantity inventory-quantity--modified">{{quantityVariant.value}}</span>
                    </td>
                  </tr>
                  </tbody>
                </table>
              </div>

            </div>
          </div>
        </div>

      </div>
      <div class="buttons">
        <button (click)="popupChangeQuantityVariant.hide()" class="ui-button close-modal" type="button" name="button">
          Cancel
        </button>
        <button (click)="changeQuantityVariants()" class="ui-button js-btn-loadable btn-primary has-loading"
                type="submit"
        >Save
        </button>
      </div>
    </form>
  </div>
</div>
<div (onHidden)="popupDuplicateVariant.hide()" [config]="{ show: false }" bsModal
     #popupDuplicateVariant="bs-modal"
     class="wrap-popup">
  <div class="modal" data-tg-refresh="modal" id="modal_container" aria-hidden="false" aria-labelledby="ModalTitle"
       tabindex="-1" style="display: block;">
    <header>
      <h2 id="ModalTitle">Duplicate variants</h2>
      <a href="javascript:" (click)="popupDuplicateVariant.hide()" class="close-modal" role="button"
         aria-label="Close dialog">×</a>
      <app-alert></app-alert>
    </header>

    <form>
      <div class="body">
        <div>
          <label>{{optionDuplicate}} for duplicated variants</label>
          <input #optionDuplicateValue type="text">
        </div>
      </div>

      <div class="buttons">
        <button (click)="popupDuplicateVariant.hide()" class="ui-button close-modal" type="button" name="button">
          Cancel
        </button>
        <button (click)="duplicateValueOption(optionDuplicateValue.value)"
                class="ui-button js-btn-loadable btn-primary has-loading" type="submit"
                name="button">Done
        </button>
      </div>
    </form>
  </div>
</div>
<div (onHidden)="popupChangeOptionsVariant.hide()" [config]="{ show: false }" bsModal
     #popupChangeOptionsVariant="bs-modal"
     class="wrap-popup">
  <div class="modal" data-tg-refresh="modal" id="modal_container" style="display: block;" aria-hidden="false"
       aria-labelledby="ModalTitle" tabindex="-1">
    <div>
      <div id="change-product-options">

        <header [class.hide]="confirmDeleteOption.status">
          <h2 id="ModalTitle">Edit options</h2>
          <button (click)="popupChangeOptionsVariant.hide()" class="ui-button btn--link close-modal" type="button"
                  name="button">Cancel
          </button>
        </header>

        <div [class.hide]="confirmDeleteOption.status">
          <!--<form id="option-value-form" >-->
          <div class="body">
            <div class="js-options-table">
              <div *ngIf="product.options.length" class="ui-stack ui-stack--wrap ui-stack--vertical">

                <div *ngFor="let option of product.options; let i=index" class="ui-stack ui-stack--wrap js-options-row">
                  <div class="ui-stack-item">
                    <input class="next-input" type="text" [(ngModel)]="option.name">
                  </div>
                  <div class="ui-stack-item ui-stack-item--fill">

                    <ul *ngIf="option.values.length "
                        class=" popup-change-options-variant next-token-list next-token-list--is-input next-token-list--is-input-invisible tokenized-product-options option-{{i+1}} tagit ui-widget ui-widget-content ui-corner-all">
                      <li *ngFor="let val of option.values"
                          class="tagit-choice ui-widget-content ui-state-default ui-corner-all tagit-choice-editable">
                        <span class="tagit-label">{{val}}</span>
                        <a *ngIf="option.values.length > 1" (click)="confirmDeleteOption = {
                                                                      status: true,
                                                                      option: option.name,
                                                                      value: val
                                                                      };"
                           class="tagit-close"><span class="text-icon">×</span><span
                          class="ui-icon ui-icon-close"></span></a>
                      </li>
                    </ul>

                  </div>
                  <div (click)="confirmDeleteOption = {
                                status: true,
                                option: option.name,
                                value: ''
                                };" class="ui-stack-item ">
                    <button class="ui-button remove-option btn btn--icon"
                            type="button" name="button">
                      <svg class="next-icon next-icon--size-20">
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#delete-minor"></use>
                      </svg>
                    </button>
                  </div>
                </div>
                <div ngif="addMoreOptionsPopup.length" *ngFor="let opt of addMoreOptionsPopup;let i = index"
                     class="ui-stack ui-stack--wrap js-options-row">
                  <div class="ui-stack-item">
                    <input class="next-input" type="text" [(ngModel)]="opt.name">
                  </div>
                  <div class="ui-stack-item ui-stack-item--fill">

                    <div class="tooltip-error-container">
                      <input type="text" class="next-input w-auto variant-form" [(ngModel)]="opt.values"
                             maxlength="255" placeholder="Default {{opt.name}}">
                      <div class="tooltip-error attached-to-top variant-tooltip hide">
                        <ul class="error-list">
                          <li>You can only add 1 variant at a time. Remove commas and try again.</li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div (click)="removeOptionPopup(i)" class="ui-stack-item">
                    <button class="ui-button remove-option btn btn--icon"
                            type="button" name="button">
                      <svg class="next-icon next-icon--size-20">
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#delete-minor"></use>
                      </svg>
                    </button>
                  </div>
                </div>
                <div [class.hide]="(product.options.length +  addMoreOptionsPopup.length)>= 3"
                     (click)="addOptionPopup()" id="add-option"
                     class="js-add-option">
                  <a class="btn add-option">Add another option</a>
                </div>
              </div>
            </div>
          </div>
          <div class="buttons">
            <button (click)="cancelPopupChangeOptionsVariant()" class="ui-button close-modal" type="button"
                    name="button">Cancel
            </button>
            <button (click)="changeOptionVariant()"
                    class="ui-button js-btn-primary js-btn-loadable btn-primary has-loading" type="submit"
                    name="button">Save
            </button>
          </div>
          <!--</form>-->
        </div>
        <div [class.hide]="!confirmDeleteOption.status">
          <header>
            <h2>Delete option value?</h2>
          </header>
          <form id="deleteOptionValueForm">
            <div class="body">
              <p>You’re about to delete <strong
              >all
                undefined variants</strong> with a <strong></strong> of
                <strong></strong>. This action can’t be undone.</p>
            </div>

            <div class="buttons">
              <button (click)="confirmDeleteOption = {
                                status: false,
                                option: '',
                                value: ''
                                };" class="ui-button close-modal" type="button"
                      name="button">Cancel
              </button>
              <button (click)="confirmDeleteOptions()"
                      class="ui-button js-btn-loadable btn-destroy-no-hover has-loading" type="submit" name="button">
                Delete
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<div (onHidden)="popupReorderOptionVariants.hide()" [config]="{ show: false }" bsModal
     #popupReorderOptionVariants="bs-modal"
     class="wrap-popup">
  <div class="modal" data-tg-refresh="modal" id="modal_container" aria-hidden="false" aria-labelledby="ModalTitle"
       tabindex="-1" style="display: block;">
    <header>
      <h2 id="ModalTitle">Reorder variants and options</h2>
      <button (click)="popupReorderOptionVariants.hide()" class="ui-button btn--link close-modal" type="button"
              name="button">Close modal
      </button>
    </header>

    <div data-context="reorder">

      <form>
        <div class="body">
          <p class="ssb">Reorder variants or options to change how they appear on your store.</p>
          <ol *ngIf="product.options.length" dnd-sortable-container [sortableData]="product.options"
              [dropZones]="['container-dropZone']"
              class="js-product-options reorder-modal__options-list ui-sortable">

            <li *ngFor="let option of product.options; let i=index" dnd-sortable [sortableIndex]="i"
                [dragEnabled]="!isDragValue"
                class="reorder-modal__options-row js-product-option next-grid next-grid--no-outside-padding option-{{i+1}}"
                style="opacity: 1;">
              <div (mouseenter)="isDragValue = false"
                   class="next-grid__cell next-grid__cell--quarter next-grid__cell--vertically-centered">
                <div class="js-product-option-name js-product-option-name--is-draggable drag"
                     id="sortable-option-525925449758">
                  <div class="next-grid next-grid--no-padding">
                    <div class="next-grid__cell next-grid__cell--no-flex">
                      <svg class="next-icon next-icon--color-slate-darker next-icon--size-12 next-icon--inline-before">
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#next-drag-handle"></use>
                      </svg>
                    </div>
                    <div class="next-grid__cell">
                    <span class="next-label next-label--no-margin">
                      {{option.name}}
                    </span>
                    </div>
                  </div>
                </div>
              </div>
              <div *ngIf="option.values.length" dnd-sortable-container [sortableData]="product.options[i].values"
                   [dropZones]="['widget-dropZone-'+option.id]" class="next-grid__cell">
                <ol
                  class="js-product-option-values tokenized-product-options next-token-list next-token-list--large-tokens next-token-list--sortable ui-sortable">

                  <li *ngFor="let value of option.values; let x = index" (mouseenter)="isDragValue = true" dnd-sortable
                      [sortableIndex]="x" [dragEnabled]="isDragValue"
                      [dragData]="value"
                      class="next-token tagit-choice js-product-option-value--is-draggable {{option.values.length > 1 ? ' next-token--is-draggable drag ' : ''}} "
                      style="opacity: 1;">
                    <span class="next-token__label js-product-option-value">{{value}}</span>
                  </li>
                </ol>
              </div>
            </li>
          </ol>
        </div>
        <div class="buttons">
          <button (click)="popupReorderOptionVariants.hide()" class="ui-button close-modal" type="button" name="button">
            Cancel
          </button>
          <button (click)="reorderOptions()" class="ui-button js-btn-loadable js-btn-primary btn-primary has-loading"
                  type="submit" name="button">
            Save
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
